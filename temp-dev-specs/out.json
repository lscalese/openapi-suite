{
    "Info": {
        "Title": "Nuts DID Manager API spec",
        "Version": "1.0.0",
        "Description": "API specification for DID management helper APIs. The goal of this API is to help administrative interfaces to manage DIDs."
    },
    "Servers": [
        {
            "Url": "http://localhost:8081",
            "Description": "For internal-facing endpoints."
        },
        {
            "Url": "http://localhost:8080",
            "Description": "For public-facing endpoints."
        }
    ],
    "Paths": [
        {
            "Path": "/internal/didman/v1/did/{did}/contactinfo",
            "Verb": "get",
            "OperationId": "getContactInformation",
            "Responses": [
                {
                    "StatusCode": "200",
                    "Description": "The actual Contact Information of the DID document.",
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.ContactInformation"
                    }
                },
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/did/{did}/contactinfo",
            "Verb": "put",
            "OperationId": "updateContactInformation",
            "Summary": "Add a predetermined DID Service with real life contact information",
            "Description": "In case of emergency or support questions a service provider operating a nuts node should\nprovide contact information such as an emergency phone number and support email address.\n\nThere is at most one contact-information service per DID.\n",
            "RequestBodies": [
                {
                    "Required": true,
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Json",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.ContactInformation"
                    }
                }
            ],
            "Responses": [
                {
                    "StatusCode": "200",
                    "Description": "The given type and URL have been added as service to the DID Document",
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.ContactInformation"
                    }
                },
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/did/{did}/endpoint",
            "Verb": "post",
            "OperationId": "addEndpoint",
            "Summary": "Add a service endpoint or a reference to a service.",
            "Description": "To distinguish from compound services, this type of service will be called an endpoint.\nIn the Nuts specs this type of service is called a concrete service.\n\nAdd an endpoint with a type and URL to a DID Service in a Document. The API will convert it to a DID service with the serviceEndpoint set to a URL.\nThis API will also check if an endpoint with the same type already exists. This API is not meant to add compound services.\n\nThe URL can either be an Endpoint or a reference to another service.\n\nerror returns:\n* 400 - incorrect input\n* 404 - unknown DID\n* 409 - a service with the same type already exists\n",
            "RequestBodies": [
                {
                    "Required": true,
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Json",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.EndpointProperties"
                    }
                }
            ],
            "Responses": [
                {
                    "StatusCode": "200",
                    "Description": "The service which has been added to the DID Document",
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.Endpoint"
                    }
                },
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/did/{did}/endpoint/{type}",
            "Verb": "put",
            "OperationId": "updateEndpoint",
            "Summary": "Update a service endpoint or a reference to a service.",
            "Description": "Update an endpoint's URL or reference in a DID document. The endpoint to be updated is selected by type.\nThe URL can either be an Endpoint or a reference to another service. Updating the type is not supported.\n\nerror returns:\n* 400 - incorrect input\n* 404 - unknown DID or service with this type\n",
            "RequestBodies": [
                {
                    "Required": true,
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Json",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.EndpointProperties"
                    }
                }
            ],
            "Responses": [
                {
                    "StatusCode": "200",
                    "Description": "The endpoint which has been updated",
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.Endpoint"
                    }
                },
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/did/{did}/endpoint/{type}",
            "Verb": "delete",
            "OperationId": "deleteEndpointsByType",
            "Description": "Delete all endpoints with the provided type from the DID Document.\n\nerror returns:\n* 400 - malformatted input, like the DID or the endpoint type.\n* 404 - DID or service with this type not found.\n* 409 - the service is referenced by other services\n",
            "Responses": [
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/did/{did}/compoundservice",
            "Verb": "get",
            "OperationId": "getCompoundServices",
            "Summary": "Get a list of compound services for a DID document.\n\nerror responses:\n* 400 - incorrect input\n* 404 - unknown DID\n",
            "Responses": [
                {
                    "StatusCode": "200",
                    "Description": "The list of compound services on the DID document.\nIt excludes special compound services like ContactInformation.\n",
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.CompoundService",
                        "Collection": "list"
                    }
                },
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/did/{did}/compoundservice",
            "Verb": "post",
            "OperationId": "addCompoundService",
            "Summary": "Add a compound service to a DID Document.",
            "Description": "Add a service to a DID Document that references one or more endpoints using a map. The keys of the map indicate the service name/type, the values contain the references to the endpoints.\nThe endpoints may be in the same or in another DID Document, but they must be resolvable when the service is created.\nThe references must follow the format for service references as specified by Nuts RFC006.\n\nThis API will also check if an endpoint with the same type already exists. This API is not meant to add endpoints.\n\nerror returns:\n* 400 - incorrect input\n* 404 - unknown DID\n* 409 - a service with the same type already exists\n",
            "RequestBodies": [
                {
                    "Required": true,
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Json",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.CompoundServiceProperties"
                    }
                }
            ],
            "Responses": [
                {
                    "StatusCode": "200",
                    "Description": "The compound service has been added to the DID Document",
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.CompoundService"
                    }
                },
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/did/{did}/compoundservice/{type}",
            "Verb": "put",
            "OperationId": "updateCompoundService",
            "Summary": "Update a compound service.",
            "Description": "Update a compound service in a DID Document. It follows the same requirements as when adding a compound service.\nIt updates all endpoints of the compound service (no partial updates). Updating the type is not supported.\n\nerror returns:\n* 400 - incorrect input\n* 404 - unknown DID or service with this type\n",
            "RequestBodies": [
                {
                    "Required": true,
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Json",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.CompoundServiceProperties"
                    }
                }
            ],
            "Responses": [
                {
                    "StatusCode": "200",
                    "Description": "The compound service has been updated",
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.CompoundService"
                    }
                },
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/did/{did}/compoundservice/{compoundServiceType}/endpoint/{endpointType}",
            "Verb": "get",
            "OperationId": "getCompoundServiceEndpoint",
            "Summary": "Retrieves the endpoint with the specified endpointType from the specified compound service.",
            "Description": "Retrieves the endpoint with the specified endpointType from the specified compound service.\nIt returns the serviceEndpoint of the specified service (which must be an absolute URL endpoint).\n\nerror responses:\n* 400 - incorrect input (e.g. the given service type isn't a compound service)\n* 404 - unknown DID, compound service or endpoint\n* 406 - service references are nested too deep or reference is invalid in other ways\n",
            "Parameters": [
                {
                    "Name": "resolve",
                    "In": "query",
                    "Description": "Whether to resolve references. When true and the given endpoint is a reference it returns the endpoint of the referenced service.\nIf false it returns the reference itself. Defaults to true.\n",
                    "Required": false,
                    "ModelProperty": {
                        "Name": "Resolve",
                        "pJSONFieldName": "schema",
                        "Type": "%Boolean"
                    }
                }
            ],
            "Responses": [
                {
                    "StatusCode": "200",
                    "Description": "The endpoint of the given type and compound service is returned.\nIt returns JSON by default, text if requested through the accept header (text/plain)\n",
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.EndpointResponse"
                    }
                },
                {
                    "StatusCode": "200",
                    "Description": "The endpoint of the given type and compound service is returned.\nIt returns JSON by default, text if requested through the accept header (text/plain)\n",
                    "ContentType": "text/plain",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "%String"
                    }
                },
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/service/{id}",
            "Verb": "delete",
            "OperationId": "deleteService",
            "Summary": "Remove a service from a DID Document.",
            "Description": "Remove a service from a DID Document.\n\nerror returns:\n* 400 - incorrect input\n* 404 - unknown DID\n* 409 - the service is referenced by other services\n",
            "Responses": [
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        },
        {
            "Path": "/internal/didman/v1/search/organizations",
            "Verb": "get",
            "OperationId": "searchOrganizations",
            "Responses": [
                {
                    "StatusCode": "200",
                    "Description": "Organizations resulting from the search.",
                    "ContentType": "application/json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.OrganizationSearchResult",
                        "Collection": "list"
                    }
                },
                {
                    "StatusCode": "default",
                    "Description": "Default return values follow Problem Details for HTTP APIs as specified in [RFC7807](https://tools.ietf.org/html/rfc7807).\n\nCurrently, return values contain the following members of a problem details object:\n- \"title\" (string) - A short, human-readable summary of the problem type.\n- \"status\" (number) - The HTTP status code generated by the origin server for this occurrence of the problem.\n- \"detail\" (string) - A human-readable explanation specific to this occurrence of the problem.\n",
                    "ContentType": "application/problem+json",
                    "ModelProperty": {
                        "Name": "Content",
                        "pJSONFieldName": "schema",
                        "Type": "myapp.models.InlineResponseDefault"
                    }
                }
            ]
        }
    ],
    "Models": [
        {
            "SchemaRef": "#/components/schemas/Endpoint",
            "Name": "myapp.models.Endpoint",
            "Super": "%JSON.Adaptor,%RegisteredObject",
            "Properties": [
                {
                    "Name": "Id",
                    "pJSONFieldName": "id",
                    "Type": "%String"
                },
                {
                    "Name": "Type",
                    "pJSONFieldName": "type",
                    "Type": "%String"
                },
                {
                    "Name": "ServiceEndpoint",
                    "pJSONFieldName": "serviceEndpoint",
                    "Type": "%String"
                }
            ],
            "Description": "A combination of type and URL."
        },
        {
            "SchemaRef": "#/components/schemas/EndpointProperties",
            "Name": "myapp.models.EndpointProperties",
            "Super": "%JSON.Adaptor,%RegisteredObject",
            "Properties": [
                {
                    "Name": "Type",
                    "pJSONFieldName": "type",
                    "Type": "%String"
                },
                {
                    "Name": "Endpoint",
                    "pJSONFieldName": "endpoint",
                    "Type": "%String"
                }
            ],
            "Description": "A combination of type and URL."
        },
        {
            "SchemaRef": "#/components/schemas/CompoundServiceProperties",
            "Name": "myapp.models.CompoundServiceProperties",
            "Super": "%JSON.Adaptor,%RegisteredObject",
            "Properties": [
                {
                    "Name": "Type",
                    "pJSONFieldName": "type",
                    "Type": "%String"
                },
                {
                    "Name": "ServiceEndpoint",
                    "pJSONFieldName": "serviceEndpoint",
                    "Type": "%VarString"
                }
            ],
            "Description": "A creation request for a compound service that contains endpoints. The endpoints can be either absolute endpoints or references."
        },
        {
            "SchemaRef": "#/components/schemas/CompoundService",
            "Name": "myapp.models.CompoundService",
            "Super": "%JSON.Adaptor,%RegisteredObject",
            "Properties": [
                {
                    "Name": "Id",
                    "pJSONFieldName": "id",
                    "Type": "%String"
                },
                {
                    "Name": "Type",
                    "pJSONFieldName": "type",
                    "Type": "%String"
                },
                {
                    "Name": "ServiceEndpoint",
                    "pJSONFieldName": "serviceEndpoint",
                    "Type": "%VarString"
                }
            ],
            "Description": "A creation request for a compound service with endpoints and/or references to endpoints."
        },
        {
            "SchemaRef": "#/components/schemas/ContactInformation",
            "Name": "myapp.models.ContactInformation",
            "Super": "%JSON.Adaptor,%RegisteredObject",
            "Properties": [
                {
                    "Name": "Name",
                    "pJSONFieldName": "name",
                    "Type": "%String"
                },
                {
                    "Name": "Phone",
                    "pJSONFieldName": "phone",
                    "Type": "%String"
                },
                {
                    "Name": "Email",
                    "pJSONFieldName": "email",
                    "Type": "%String"
                },
                {
                    "Name": "Website",
                    "pJSONFieldName": "website",
                    "Type": "%String"
                }
            ],
            "Description": "A set of contact information entries"
        },
        {
            "SchemaRef": "#/components/schemas/OrganizationSearchResult",
            "Name": "myapp.models.OrganizationSearchResult",
            "Super": "%JSON.Adaptor,%RegisteredObject",
            "Properties": [
                {
                    "Name": "Organization",
                    "pJSONFieldName": "organization",
                    "Type": "%VarString"
                },
                {
                    "Name": "DidDocument",
                    "pJSONFieldName": "didDocument",
                    "Type": "myapp.models.DIDDocument"
                }
            ],
            "Description": "An entry resulting from the organization search."
        },
        {
            "SchemaRef": "#/components/schemas/EndpointResponse",
            "Name": "myapp.models.EndpointResponse",
            "Super": "%JSON.Adaptor,%RegisteredObject",
            "Properties": [
                {
                    "Name": "Endpoint",
                    "pJSONFieldName": "endpoint",
                    "Type": "%String"
                }
            ]
        },
        {
            "SchemaRef": "#/components/schemas/inline_response_default",
            "Name": "myapp.models.InlineResponseDefault",
            "Super": "%JSON.Adaptor,%RegisteredObject",
            "Properties": [
                {
                    "Name": "Title",
                    "pJSONFieldName": "title",
                    "Type": "%String"
                },
                {
                    "Name": "Status",
                    "pJSONFieldName": "status",
                    "Type": "%Decimal"
                },
                {
                    "Name": "Detail",
                    "pJSONFieldName": "detail",
                    "Type": "%String"
                }
            ]
        }
    ]
}